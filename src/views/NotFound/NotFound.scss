@use '@/styles/constantes.scss' as *;

// Page 404 responsive : occupe toujours l'espace visible entre la navbar et le footer
.not-found {
	--nav-h: 60px; // desktop
	--footer-h: 50px; // desktop
	--gap: clamp(1.25rem, 3vw, 2.5rem);
	--code-size: clamp(3.5rem, 14vw, 9rem);
	min-height: calc(100dvh - var(--nav-h) - var(--footer-h));
	display: flex;
	align-items: center;
	justify-content: center;
	padding: clamp(1rem, 3vh, 2rem) clamp(1rem, 2.5vw, 2rem);
	position: relative;
	isolation: isolate;
	box-sizing: border-box;
	overflow: hidden; // évite tout scroll si animation dépasse légèrement

	&__inner {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(min(330px, 100%), 1fr));
		gap: var(--gap);
		width: 100%;
		max-width: 1150px;
		align-items: center;
		margin-inline: auto;
		/* Empêche le contenu de dépasser la hauteur disponible */
		max-height: 100%;
	}

	&__visual {
		position: relative;
		display: flex;
		align-items: center;
		justify-content: center;
		padding: .5rem;
    
		img {
			max-width: min(300px, 42dvh);
			width: 70%;
			filter: drop-shadow(0 8px 18px rgba(0,0,0,0.18));
			animation: float 8s ease-in-out infinite;
			opacity: 0.92;
			object-fit: contain;
		}

		.not-found__glow {
			position: absolute;
			inset: 10% 12%;
			background: radial-gradient(circle at 50% 50%, rgba(178,144,182,0.55), rgba(44,150,150,0.15) 55%, transparent 70%);
			filter: blur(40px) saturate(120%);
			opacity: .55;
			z-index: -1;
			pointer-events: none;
		}
	}

	&__content {
		display: flex;
		flex-direction: column;
		gap: clamp(.9rem, 1.8vh, 1.25rem);
		max-width: 640px;
		margin-inline: auto;
		text-align: left;
	}

	&__title {
		font-size: clamp(1.7rem, 3.6vw, 3rem);
		font-weight: 600;
		line-height: 1.1;
		color: $basic-text-color;
		display: flex;
		flex-direction: column;
		margin: 0;
	}

	&__code {
		font-size: var(--code-size);
		font-weight: 700;
		letter-spacing: -4px;
		line-height: .9;
		background: linear-gradient(110deg, $primary-color, $secondary-color);
		-webkit-background-clip: text;
		background-clip: text;
		color: transparent;
		text-shadow: 0 4px 12px rgba(44,150,150,0.35);
		margin-bottom: .25rem;
	}

	&__text {
		font-size: clamp($mobile-text-font-size, 1rem + .25vw, $text-font-size);
		color: $basic-text-color;
		margin: 0;
	}

	&__actions {
		display: flex;
		flex-wrap: wrap;
		gap: .6rem .9rem;
		margin-top: .25rem;

		.custom-button { font-size: .95rem; }
	}

	&__shortcuts {
		margin-top: .25rem;
		ul {
			list-style: none;
			padding: 0;
			margin: 0;
			display: flex;
			flex-wrap: wrap;
			gap: .75rem 1.25rem;
			font-size: .95rem;
		}
		a {
			position: relative;
			padding: .15rem .1rem;
			color: $primary-color;
			font-weight: 500;
			text-decoration: none;
			transition: color .25s ease;

			&::after {
				content: '';
				position: absolute;
				left: 0; bottom: 0;
				width: 100%; height: 2px;
				background: linear-gradient(120deg, $primary-color, $secondary-color);
				transform: scaleX(0);
				transform-origin: left;
				transition: transform .35s ease;
			}
			&:hover::after,
			&:focus-visible::after { transform: scaleX(1); }
			&:hover,
			&:focus-visible { color: $primary-color; }
		}
	}

	// Large breakpoint adjustments (plus de place -> on garde l'image taille normale)
	@media (min-width: 1400px) and (min-height: 850px) {
		&__visual img { max-width: 340px; }
	}

	// Mobile / tablette : adapter hauteurs de nav / footer
	@media (max-width: 950px) { --nav-h: 50px; }
	@media (max-width: 650px) { --footer-h: 40px; }

	// Petites hauteurs (paysage mobile, écrans réduits)
	@media (max-height: 700px) {
		--code-size: clamp(3rem, 12vw, 6.5rem);
		&__visual img { max-width: min(240px, 38dvh); }
	}
	@media (max-height: 600px) {
		--code-size: clamp(2.8rem, 11vw, 5.5rem);
		&__visual img { max-width: 200px; }
		&__content { gap: .9rem; }
	}
	@media (max-height: 520px) {
		--code-size: clamp(2.6rem, 18vw, 4.8rem); // placé avant la règle imbriquée pour éviter l'avertissement Sass
		&__visual { display: none; }
		&__title { text-align: center; }
		&__content { text-align: center; }
		&__actions { justify-content: center; }
		&__shortcuts ul { justify-content: center; }
	}

	// Layout étroit
	@media (max-width: 680px) {
		&__title { text-align: center; }
		&__content { text-align: center; }
		&__actions { justify-content: center; }
		&__shortcuts ul { justify-content: center; }
	}
}

@keyframes float {
	0%,100% { transform: translateY(0); }
	50% { transform: translateY(-14px); }
}
